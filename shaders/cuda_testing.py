from numba import jit
import numpy as np

from timeit import default_timer as timer


data = [
    [267.62, 330.37, 255.0, 255.0, 255.0],
    [269.58, 303.11, 255.0, 255.0, 255.0],
    [770.53, 307.77, 255.0, 255.0, 255.0],
    [793.44, 388.04, 255.0, 255.0, 255.0],
    [1243.18, 415.61, 255.0, 255.0, 255.0],
    [677.53, 372.12, 255.0, 255.0, 255.0],
    [484.8, 461.06, 255.0, 255.0, 255.0],
    [980.0, 442.9, 173.25, 85.68, 235.88, 255.0],
    [972.64, 420.08, 173.25, 85.68, 235.88, 255.0],
    [985.89, 426.98, 173.25, 85.68, 235.88, 255.0],
    [966.1, 439.97, 173.25, 85.68, 235.88, 255.0],
    [973.07, 428.95, 173.25, 85.68, 235.88, 255.0],
    [984.99, 431.25, 173.7, 87.55, 233.07, 255.0],
    [977.23, 428.63, 173.7, 87.55, 233.07, 255.0],
    [983.82, 438.88, 173.7, 87.55, 233.07, 255.0],
    [976.55, 431.1, 173.25, 85.68, 235.88, 255.0],
    [989.1, 423.35, 173.25, 85.68, 235.88, 255.0],
    [972.53, 422.43, 173.25, 85.68, 235.88, 255.0],
    [980.72, 434.63, 173.7, 87.55, 233.07, 255.0],
    [969.56, 428.61, 173.25, 85.68, 235.88, 255.0],
    [983.48, 435.64, 173.25, 85.68, 235.88, 255.0],
    [981.99, 420.63, 173.25, 85.68, 235.88, 255.0],
    [977.28, 431.03, 173.25, 85.68, 235.88, 255.0],
    [980.02, 415.11, 173.25, 85.68, 235.88, 255.0],
    [985.71, 433.62, 173.7, 87.55, 233.07, 255.0],
    [986.61, 443.08, 174.14, 89.42, 230.26, 255.0],
    [984.61, 430.39, 173.25, 85.68, 235.88, 255.0],
    [980.58, 433.26, 173.25, 85.68, 235.88, 255.0],
    [980.72, 431.1, 173.25, 85.68, 235.88, 255.0],
    [974.65, 432.06, 173.7, 87.55, 233.07, 255.0],
    [977.03, 433.33, 173.25, 85.68, 235.88, 255.0],
    [982.48, 421.17, 173.25, 85.68, 235.88, 255.0],
    [979.35, 417.6, 173.25, 85.68, 235.88, 255.0],
    [981.73, 439.99, 173.25, 85.68, 235.88, 255.0],
    [977.89, 432.44, 173.7, 87.55, 233.07, 255.0],
    [974.0, 423.61, 173.25, 85.68, 235.88, 255.0],
    [984.55, 425.47, 173.7, 87.55, 233.07, 255.0],
    [981.06, 434.92, 173.25, 85.68, 235.88, 255.0],
    [986.81, 439.14, 173.25, 85.68, 235.88, 255.0],
    [985.29, 449.35, 173.7, 87.55, 233.07, 255.0],
    [993.98, 426.81, 173.25, 85.68, 235.88, 255.0],
    [989.47, 437.85, 173.25, 85.68, 235.88, 255.0],
    [984.48, 439.45, 173.25, 85.68, 235.88, 255.0],
    [975.15, 419.98, 173.25, 85.68, 235.88, 255.0],
    [974.7, 435.9, 173.25, 85.68, 235.88, 255.0],
    [985.55, 418.33, 173.7, 87.55, 233.07, 255.0],
    [983.73, 450.95, 173.25, 85.68, 235.88, 255.0],
    [982.48, 429.64, 173.25, 85.68, 235.88, 255.0],
    [997.27, 442.51, 173.25, 85.68, 235.88, 255.0],
    [975.77, 436.2, 173.25, 85.68, 235.88, 255.0],
    [992.91, 437.8, 173.7, 87.55, 233.07, 255.0],
    [970.61, 429.89, 173.25, 85.68, 235.88, 255.0],
    [982.27, 419.34, 173.7, 87.55, 233.07, 255.0],
    [980.65, 451.51, 173.7, 87.55, 233.07, 255.0],
    [979.94, 427.01, 173.7, 87.55, 233.07, 255.0],
    [985.07, 448.37, 173.7, 87.55, 233.07, 255.0],
    [978.9, 431.75, 173.25, 85.68, 235.88, 255.0],
    [975.71, 429.88, 173.7, 87.55, 233.07, 255.0],
    [981.45, 433.99, 173.25, 85.68, 235.88, 255.0],
    [972.72, 419.32, 173.25, 85.68, 235.88, 255.0],
    [981.8, 433.49, 173.25, 85.68, 235.88, 255.0],
    [993.45, 445.38, 173.7, 87.55, 233.07, 255.0],
    [984.51, 422.55, 173.25, 85.68, 235.88, 255.0],
    [995.25, 428.22, 173.7, 87.55, 233.07, 255.0],
    [967.25, 434.91, 173.25, 85.68, 235.88, 255.0],
    [976.64, 429.53, 173.25, 85.68, 235.88, 255.0],
    [980.17, 432.84, 173.25, 85.68, 235.88, 255.0],
    [979.95, 431.52, 173.25, 85.68, 235.88, 255.0],
    [981.14, 436.14, 173.7, 87.55, 233.07, 255.0],
    [986.15, 442.63, 173.25, 85.68, 235.88, 255.0],
    [978.53, 422.94, 173.25, 85.68, 235.88, 255.0],
    [389.76, 401.4, 250.59, 123.48, 16.3, 255.0],
    [393.04, 403.44, 248.47, 123.32, 21.5, 255.0],
    [392.88, 400.19, 250.59, 123.48, 16.3, 255.0],
    [389.52, 399.28, 248.47, 123.32, 21.5, 255.0],
    [389.4, 396.34, 250.59, 123.48, 16.3, 255.0],
    [389.73, 400.68, 248.47, 123.32, 21.5, 255.0],
    [387.64, 400.29, 250.59, 123.48, 16.3, 255.0],
    [385.75, 400.02, 250.59, 123.48, 16.3, 255.0],
    [389.18, 399.89, 250.59, 123.48, 16.3, 255.0],
    [389.75, 400.57, 248.47, 123.32, 21.5, 255.0],
    [390.3, 405.86, 250.59, 123.48, 16.3, 255.0],
    [385.08, 399.57, 250.59, 123.48, 16.3, 255.0],
    [388.51, 401.16, 248.47, 123.32, 21.5, 255.0],
    [388.5, 405.39, 250.59, 123.48, 16.3, 255.0],
    [386.46, 399.21, 248.47, 123.32, 21.5, 255.0],
    [392.24, 402.24, 250.59, 123.48, 16.3, 255.0],
    [391.55, 404.88, 250.59, 123.48, 16.3, 255.0],
    [392.04, 403.03, 250.59, 123.48, 16.3, 255.0],
    [387.03, 403.74, 250.59, 123.48, 16.3, 255.0],
    [388.54, 402.68, 248.47, 123.32, 21.5, 255.0],
    [386.91, 396.45, 250.59, 123.48, 16.3, 255.0],
    [384.62, 401.31, 250.59, 123.48, 16.3, 255.0],
    [388.33, 401.66, 250.59, 123.48, 16.3, 255.0],
    [385.65, 399.69, 250.59, 123.48, 16.3, 255.0],
    [389.08, 403.97, 250.59, 123.48, 16.3, 255.0],
    [386.22, 399.52, 250.59, 123.48, 16.3, 255.0],
    [388.81, 401.06, 250.59, 123.48, 16.3, 255.0],
    [393.17, 402.13, 248.47, 123.32, 21.5, 255.0],
    [388.1, 401.44, 250.59, 123.48, 16.3, 255.0],
    [388.55, 400.0, 248.47, 123.32, 21.5, 255.0],
    [389.64, 401.34, 250.59, 123.48, 16.3, 255.0],
    [392.37, 401.86, 250.59, 123.48, 16.3, 255.0],
    [390.32, 397.28, 248.47, 123.32, 21.5, 255.0],
    [391.81, 398.77, 250.59, 123.48, 16.3, 255.0],
    [388.58, 401.15, 250.59, 123.48, 16.3, 255.0],
    [386.48, 399.02, 250.59, 123.48, 16.3, 255.0],
    [388.6, 405.27, 250.59, 123.48, 16.3, 255.0],
    [388.88, 395.96, 250.59, 123.48, 16.3, 255.0],
    [390.66, 403.19, 248.47, 123.32, 21.5, 255.0],
    [388.26, 398.22, 248.47, 123.32, 21.5, 255.0],
    [389.99, 401.72, 248.47, 123.32, 21.5, 255.0],
    [388.41, 401.3, 248.47, 123.32, 21.5, 255.0],
    [388.18, 401.51, 248.47, 123.32, 21.5, 255.0],
    [389.53, 398.69, 248.47, 123.32, 21.5, 255.0],
    [390.39, 400.5, 250.59, 123.48, 16.3, 255.0],
    [389.3, 401.4, 248.47, 123.32, 21.5, 255.0],
    [388.95, 399.44, 250.59, 123.48, 16.3, 255.0],
    [391.65, 399.94, 250.59, 123.48, 16.3, 255.0],
    [385.48, 397.46, 248.47, 123.32, 21.5, 255.0],
    [392.57, 399.44, 248.47, 123.32, 21.5, 255.0],
    [389.97, 396.11, 250.59, 123.48, 16.3, 255.0],
    [385.79, 396.45, 250.59, 123.48, 16.3, 255.0],
    [387.87, 404.69, 250.59, 123.48, 16.3, 255.0],
    [391.96, 399.74, 250.59, 123.48, 16.3, 255.0],
    [384.05, 399.23, 250.59, 123.48, 16.3, 255.0],
    [389.09, 402.78, 250.59, 123.48, 16.3, 255.0],
    [386.75, 401.53, 250.59, 123.48, 16.3, 255.0],
    [387.39, 405.35, 250.59, 123.48, 16.3, 255.0],
    [389.24, 400.84, 250.59, 123.48, 16.3, 255.0],
    [391.02, 402.74, 250.59, 123.48, 16.3, 255.0],
    [389.38, 397.72, 250.59, 123.48, 16.3, 255.0],
    [390.28, 395.44, 250.59, 123.48, 16.3, 255.0],
    [390.03, 400.38, 250.59, 123.48, 16.3, 255.0],
    [392.84, 400.76, 248.47, 123.32, 21.5, 255.0],
    [390.27, 401.33, 250.59, 123.48, 16.3, 255.0],
    [386.42, 400.97, 250.59, 123.48, 16.3, 255.0],
    [392.0, 404.11, 250.59, 123.48, 16.3, 255.0],
    [385.58, 400.68, 248.47, 123.32, 21.5, 255.0],
    [388.71, 401.75, 250.59, 123.48, 16.3, 255.0]
]


# normal function to run on cpu
def func(a):
    for i in range(10000000):
        a[i] += 1

    # function optimized to run on gpu


@jit(nopython=True, parallel=True)
def generate_surfarray(size, surfarray, particles):
    width, height = size

    for x in range(width):
        for y in range(height):
            # for particle in particles:
                surfarray[x][y][0] = int(255 * (1 + 1) / 4)


if __name__ == "__main__":
    # print(f"{len(data) * 20}x{len(data[0]) * 20}")
    np.zeros([len(data), len(data[0])])
    width, height = len(data) * 20, len(data[0]) * 20
    surfarray = np.zeros([width, height, 4])
    particles = np.asarray(data, dtype=np.float32)
    # for i in range(len(data)):
    #     for j in range(6):
    #         particles[i][j] = data[i][j]

    generate_surfarray((width, height), surfarray, particles)
